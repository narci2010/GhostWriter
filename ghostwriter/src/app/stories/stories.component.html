<div class="wallpaper">
	<div class="banner"></div>
	<div class="ui-grid ui-grid-responsive ui-fluid ">
		<div class="ui-grid-row">
			<div class="ui-grid-col-2 menu">
				<p-dataList [value]="options">
					<template let-option pTemplate="item">
						<div class="container menu-item">
							<div class="background menu-item-background"></div>
							<div class="ui-grid-row content" (click)="goTo(option.state)">
								<div class="ui-grid-col-2 icon">
									<i [className]="option.class"></i>
								</div>
								<div class="ui-grid-col-10 text">{{option.name}}</div>
							</div>
						</div>
					</template>
				</p-dataList>
			</div>

			<div class="ui-grid-col-10 container main" >
				<div class="background main-background"></div>
				<div class="content main-content">
					<div class="ui-grid ui-grid-responsive ui-fluid">
						<div class="ui-grid-col-1 category-icon">
							<i class="fa fa-star-o"></i>
						</div>
						<div class="ui-grid-col-11">
							<p-dataGrid [value]="stories.get()" *ngIf="user.stared">
								<template let-story pTemplate="item">
									<div class="ui-g-12 ui-md-4 container stared" *ngIf="story.stared">
										<div class="background stared-background"></div>
										<div class="ui-grid-col content stared-content">
											<div class="ui-grid-row row-up">
												<div class="ui-grid-col-9 name" [ngClass]="isPublic(story.public)">
													{{story.name}}
												</div>
												<div class="ui-grid-col-3 star">
													<i class="fa fa-star" (click)=unstar(story.id)></i>
												</div>
											</div>
											<div class="ui-grid-row row-down" [ngClass]="isPublic(story.public)">
												<div class="ui-grid-col-3 down">
													<i class="fa fa-user"></i>
													{{story.usersCount}}
												</div>
												<div class="ui-grid-col-3 down">
													<i class="fa fa-comment"></i>
													{{story.messagesCount}}
												</div>
												<div class="ui-grid-col-3 down">
													<i [ngClass]="typeIconClass(story.type)"></i>
												</div>
												<div class="ui-grid-col-3 down">
													<i [ngClass]="permissionIconClass(story.permission)"></i>
												</div>
											</div>
										</div>
									</div>
								</template>
							</p-dataGrid>
							<div class="container no-items" *ngIf="!user.stared">
								<div class="background"></div>
								<div class="content">
									There are no stared stories. Consider giving a star to some stories.
								</div>
							</div>
						</div>
					</div>

					<hr>

					<div class="ui-grid ui-grid-responsive ui-fluid">
						<div class="ui-grid-col-1 category-icon">
							<i class="fa fa-list"></i>
						</div>
						<div class="ui-grid-col-11">
							<p-dataList [value]="stories.get()" *ngIf="user.stories">
								<template let-story pTemplate="item">
									<div class="ui-grid ui-grid-responsive ui-fluid ">					
										<div class="ui-grid-col-1 star star-list">
											<i class="fa fa-star" *ngIf="story.stared" (click)=unstar(story.id)></i>
											<i class="fa fa-star-o" *ngIf="!story.stared" (click)=star(story.id)></i>
										</div>
										<div class="ui-grid-col-11 container story">
											<div class="background story-background"></div>
											<div class="ui-grid-row content" [ngClass]="isPublic(story.public)">
												<div class="ui-grid-col-1">
													<i [ngClass]="typeIconClass(story.type)"></i>
												</div>
												<div class="ui-grid-col-7" (click)=goToStory(story.id)>
													{{story.name}}
												</div>
												<div class="ui-grid-col-2">
													<i class="fa fa-user"></i>
													{{story.usersCount}}
													<i class="fa fa-comment"></i>
													{{story.messagesCount}}
												</div>
												<div class="ui-grid-col-1 dropButton">
													<i class="fa fa-ellipsis-v"></i>
												</div>
											</div>
										</div>	
									</div>
								</template>
							</p-dataList>
							<div class="container no-items" *ngIf="!user.stories">
								<div class="background"></div>
								<div class="content">
									There are no stories. Consider creating or joining some.
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="floating-down-right">
					<i class="fa fa-plus" (click)="showDialog()"></i>
				</div>

			</div>
		</div>
	</div>
</div>

<p-dialog header="New Story" [(visible)]="displayDialog" [responsive]="true" showEffect="fade" [modal]="true" width="300" height="500">
	<form #createStoryForm="ngForm" (ngSubmit)="saveStory(createStoryForm)" novalidate>
		<input type="text" name="name" ngModel reqired pInputText/>
		<input type="text" name="desc" ngModel required pPassword/>
		<p-dropdown name="type" ngModel [options]="storyTypes"></p-dropdown>

		<p-spinner name="messageDisplayed" ngModel [min]="0" [max]="100" size="10"></p-spinner>
		<div>
			<div class="ui-grid-col-6">
				<p-spinner name="maskLength" ngModel [min]="0" [max]="100" [disabled]="maskType == 'none'" size="10"></p-spinner>
			</div>
			<div class="ui-grid-col-6">
				<p-dropdown name="maskType" ngModel [options]="maskTypes"></p-dropdown>
			</div>
		</div>
		<button pButton label="Save"></button>
	</form>
</p-dialog>